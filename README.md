# Крутилка

Многопользовательское колесо случайного выбора. Админ создаёт комнату с темой, раздаёт ссылку участникам и крутит колесо, чтобы выбрать победителя.

## Как это работает

1. Админ открывает приложение, вводит тему и создаёт комнату
2. Админ раздаёт участникам ссылку на комнату
3. Участники переходят по ссылке, вводят своё имя и вариант
4. Админ закрывает приём, модерирует варианты и крутит колесо
5. Админ публикует победителя — участники увидят результат, зайдя по ссылке снова

### Режим монетки

Если вариантов ровно 2, колесо превращается в 3D-монетку (орёл/решка).

### Пасхалка

Добавьте `?polish` к любому URL, чтобы переключить колесо в ч/б режим.

## Стек

- **Бэкенд**: Node.js, Express, SQLite (better-sqlite3)
- **Фронтенд**: Vanilla JS, HTML5 Canvas
- **Деплой**: Docker Compose + Caddy (автоматический HTTPS)

## Деплой

На свежем сервере с root-доступом и A-записью, указывающей на него:

```bash
curl -fsSL https://raw.githubusercontent.com/mvasilyev/pickerwheel/main/deploy/setup.sh | bash -s your-domain.com
```

Скрипт установит Docker, создаст пользователя, соберёт контейнеры и запустит всё. Caddy получит SSL-сертификат автоматически.

## Локальная разработка

```bash
cd server
npm install
node index.js
# http://localhost:3000
```

## Структура проекта

```
public/                 Фронтенд
  index.html            Главная — создание комнаты
  room.html             Страница участника — отправка варианта
  admin.html            Админка — модерация, колесо, публикация
  wheel.js              Класс PickerWheel (Canvas)
  style.css             Стили
server/                 Бэкенд
  index.js              Express-сервер + API
  db.js                 SQLite-схема и запросы
deploy/                 Деплой
  setup.sh              Скрипт настройки сервера
  Caddyfile.template    Шаблон конфига Caddy
```
